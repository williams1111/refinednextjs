{"version":3,"sources":["../../../../server/lib/incremental-cache/file-system-cache.ts"],"names":["FileSystemCache","ctx","fs","flushToDisk","serverDistDir","maxMemoryCacheSize","memoryCache","LRUCache","max","length","value","kind","JSON","stringify","props","Error","html","pageData","get","key","data","htmlPath","getFsPath","readFile","parse","mtime","stat","lastModified","getTime","set","_","Date","now","writeFile","pathname","path","join"],"mappings":"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"}