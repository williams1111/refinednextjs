{"version":3,"sources":["../../../../server/web/spec-extension/cookies.ts"],"names":["CookieSerializeOptions","normalizeCookieOptions","options","Object","assign","maxAge","expires","Date","now","path","serializeValue","value","JSON","stringify","String","serializeExpiredCookie","key","cookie","serialize","deserializeCookie","input","headers","get","undefined","split","serializeCookie","join","Cookies","Map","parsedInput","parse","entries","set","NextCookies","response","args","getWithOptions","raw","isAlreadyAdded","has","currentCookie","Error","setCookie","filter","startsWith","append","delete","isDeleted","expiredCookie","clear","expiredCookies","Array","from","keys","map"],"mappings":"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"}